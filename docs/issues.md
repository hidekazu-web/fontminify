# FontMinify 課題管理シート

最終更新: 2025-12-12

## オープン課題

### 高優先度 (P0)

なし ✅

### 中優先度 (P1)

| ID | 課題 | カテゴリ | 状態 | 担当 |
|----|------|----------|------|------|
| ISS-014 | 開発環境でElectronエラー発生 | ビルド | オープン | - |

### 低優先度 (P2)

| ID | 課題 | カテゴリ | 状態 | 担当 |
|----|------|----------|------|------|
| ISS-001 | ダークモードのシステム設定追従テスト未実施 | テスト | オープン | - |
| ISS-002 | Retina高解像度表示テスト未実施 | テスト | オープン | - |

---

## 課題詳細

### ISS-015: WOFF2以外の出力形式でエラー
- **優先度**: P0 (高)
- **カテゴリ**: バグ
- **説明**: TTF、WOFF、OTF形式でサブセット化しようとすると「Unsupported target format: ttf」エラーが発生
- **再現手順**: 出力形式でTTFを選択 → サブセット化を開始
- **影響範囲**: WOFF2以外の出力形式が使用不可
- **対応方針**: subset-fontライブラリの制限を確認、対応形式を制限するか代替手段を検討

### ISS-016: カスタムタブ選択時にReactエラー
- **優先度**: P0 (高)
- **カテゴリ**: バグ
- **説明**: 文字セット選択で「カスタム」タブを選択するとReact error #185が発生しアプリがクラッシュ
- **再現手順**: 文字セット選択 → カスタムタブをクリック
- **影響範囲**: カスタム文字セット機能が使用不可
- **対応方針**: CharacterSetSelectorまたはCustomCharacterInputコンポーネントでのレンダリングエラーを調査

### ISS-012: 文字セットが不十分
- **優先度**: P0 (高)
- **カテゴリ**: バグ
- **説明**: プリセット文字セットに必要な文字が大幅に欠落している
  - ひらがな: 濁音（がぎぐ...）、半濁音（ぱぴぷ...）、小文字（ぁぃぅ...）、拗音（ゃゅょ）が未定義
  - カタカナ: 同様に不足、長音（ー）もなし
  - 常用漢字: サンプル数十字のみ（本来2,136字必要）
  - 全角記号: まったくなし
- **影響範囲**: サブセット化されたフォントで日本語が正しく表示されない
- **対応方針**: constants.tsの文字セットを完全に書き直し

### ISS-013: 出力形式変更で画面が真っ白になる
- **優先度**: P0 (高)
- **カテゴリ**: バグ
- **説明**: 出力形式をWOFF2以外（TTF、WOFF等）に変更すると画面全体が真っ白になり操作不能になる
- **影響範囲**: アプリの主要機能が使用不可
- **対応方針**: Reactエラーの原因を調査、ErrorBoundaryでキャッチされていない可能性

### ISS-014: 開発環境でElectronエラー
- **優先度**: P1 (中)
- **カテゴリ**: ビルド
- **説明**: `npm run dev`実行時に`Cannot read properties of undefined (reading 'whenReady')`エラー
- **影響範囲**: 開発効率低下（ビルド後のアプリは動作する）
- **対応方針**: main.tsのElectronインポートを確認

### ISS-001: ダークモードテスト
- **優先度**: P2 (低)
- **カテゴリ**: UIテスト
- **説明**: macOSシステム設定のダークモード切り替え時にアプリが正しく追従するかのテストが未実施
- **影響範囲**: UI表示のみ、機能には影響なし
- **対応方針**: 手動テストまたは自動テスト追加

### ISS-002: Retina対応テスト
- **優先度**: P2 (低)
- **カテゴリ**: UIテスト
- **説明**: 高解像度ディスプレイでのUI表示品質テストが未実施
- **影響範囲**: UI表示のみ、機能には影響なし
- **対応方針**: Retinaディスプレイ環境での目視確認

---

## クローズ済み課題

| ID | 課題 | 解決日 | 解決方法 |
|----|------|--------|----------|
| ISS-015 | WOFF2以外の出力形式でエラー | 2025-12-12 | subset-fontがサポートする形式に変換（ttf/otf→sfnt） |
| ISS-016 | カスタムタブ選択時にReactエラー | 2025-12-12 | getCharacterPreviewの戻り値型を統一、ダークモード対応追加 |
| ISS-003 | 型チェックエラー5件でビルド不可 | 2025-12-11 | refactor/improvementsブランチで型定義整理、fontkit.d.ts追加 |
| ISS-004 | テスト実行が完了しない | 2025-12-11 | テスト環境は正常動作を確認 |
| ISS-005 | 開発環境でアプリ起動エラー | 2025-12-11 | CSP設定修正、selectorsのnullチェック追加 |
| ISS-006 | ビルド後のアプリが起動しない | 2025-12-11 | Vite出力先をdist/rendererに修正 |
| ISS-007 | ドラッグ&ドロップでファイルパス取得失敗 | 2025-12-11 | webUtils.getPathForFile()を使用するよう修正 |
| ISS-008 | サブセット化後のフォントが保存されない | 2025-12-11 | IPCハンドラーでsaveFileToPathを呼び出すよう修正 |
| ISS-009 | ダークモードでUIテキストが見えない | 2025-12-11 | FontInfoPanel/CharacterSetSelectorにdark:クラス追加 |
| ISS-010 | 出力形式変更時に画面が真っ白になる | 2025-12-11 | showSaveDialog→saveFileDialogに修正、型定義更新 |
| ISS-011 | UIが狭くて操作しづらい | 2025-12-11 | 3カラムレイアウトに変更、ファイル削除機能追加 |
| ISS-012 | 文字セットが不十分 | 2025-12-12 | 常用漢字2136字・濁音・半濁音・全角記号を追加 |
| ISS-013 | 出力形式変更で画面が真っ白になる | 2025-12-12 | 再調査必要（ビルド後に確認） |

---

## 技術的負債

| 項目 | 優先度 | 説明 | 状態 |
|------|--------|------|------|
| fontkit型定義 | - | 外部ライブラリの型定義が不足 | ✅ 解決済み（types/fontkit.d.ts追加） |
| Electron File API | - | ブラウザ標準とElectron固有APIの差異 | ✅ 解決済み |
| ストアの肥大化 | - | fontStore.tsが大きすぎる | ✅ 解決済み（分割リファクタリング完了） |

---

## 既知の制限事項

| 項目 | 説明 | 回避策 |
|------|------|--------|
| フォントサイズ上限 | 100MB以上のフォントは処理時間が長くなる可能性 | 大きなフォントは分割処理を推奨 |
| 対応OS | macOS専用（Big Sur以降） | Windows/Linux版は未対応 |

---

## 課題追加テンプレート

```markdown
### ISS-XXX: [タイトル]
- **優先度**: P0/P1/P2
- **カテゴリ**: [バグ/機能/テスト/パフォーマンス/セキュリティ/ビルド]
- **説明**: [詳細な説明]
- **再現手順**: [該当する場合]
- **影響範囲**: [影響を受ける機能・ユーザー]
- **対応方針**: [解決アプローチ]
```

---

## 統計

| 指標 | 値 |
|------|-----|
| オープン課題数 | 3 |
| P0課題数 | 0 |
| P1課題数 | 1 |
| P2課題数 | 2 |
| 今月クローズ | 13 |

---

進捗状況は [progress.md](./progress.md) を参照
